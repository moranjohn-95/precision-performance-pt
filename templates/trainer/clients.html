{% extends "dashboard_base.html" %}

{% block sidebar_title %}Trainer Menu{% endblock %}
{% block sidebar_menu %}
{% include "trainer/_sidebar.html" %}
{% endblock %}

{% block page_eyebrow %}Trainer dashboard{% endblock %}
{% block page_title %}My clients{% endblock %}

{% block dashboard_content %}

<div class="dashboard-card">
    <h2 class="dashboard-card__title">Clients from consultation requests</h2>
    <p class="dashboard-subtitle">
        Trainer: {{ request.user.get_full_name|default:request.user.username }}
    </p>
    <p class="dashboard-card__subtitle">
        One row per email address, based on the latest request for that client.
    </p>

    {% if clients %}
        <div class="dashboard-table-wrapper">
            <table class="dashboard-table">
                <thead>
                    <tr>
                        <th scope="col">Name</th>
                        <th scope="col">Email</th>
                        <th scope="col">Goal</th>
                        <th scope="col">Coaching option</th>
                        <th scope="col">Last request</th>
                    </tr>
                </thead>
                <tbody>
                    {% for c in clients %}
                        <tr>
                            <td>{{ c.first_name }} {{ c.last_name }}</td>
                            <td>{{ c.email }}</td>
                            <td>{{ c.get_training_goal_display|default:"—" }}</td>
                            <td>{{ c.get_coaching_option_display|default:"—" }}</td>
                            <td>{{ c.created_at|date:"d M Y" }}</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p class="muted-text">
            No consultation requests are stored yet, so no clients are listed here.
        </p>
    {% endif %}
</div>

<div class="dashboard-card dashboard-card--secondary">
    <h2 class="dashboard-card__title">Next steps (concept)</h2>
    <p>
        This area can later include quick links to client profiles, recent check-ins,
        and programme updates.
    </p>
</div>

{% endblock %}
