{% extends "dashboard_base.html" %}

{% block sidebar_title %}
Client Menu
{% endblock %}

{% block sidebar_menu %}
<li><a href="{% url 'accounts:client_dashboard' %}">Overview</a></li>
<li><a href="{% url 'accounts:client_today' %}">Todays plan</a></li>
<li><a href="{% url 'accounts:client_programme_library' %}">Programme library</a></li>
<li><a href="{% url 'accounts:client_workout_log' %}" class="is-active">Workout log</a></li>
<li><a href="{% url 'accounts:client_metrics' %}">Body metrics</a></li>
<li><a href="{% url 'accounts:client_check_ins' %}">Check-ins</a></li>
<li><a href="{% url 'accounts:client_documents' %}">Documents</a></li>
<li><a href="{% url 'accounts:client_support' %}">Support</a></li>
{% endblock %}

{% block page_eyebrow %}Client dashboard{% endblock %}
{% block page_title %}Workout log{% endblock %}

{% block dashboard_content %}

<section class="dashboard-card dashboard-card--wide">
    <h2 class="dashboard-card__title">Recent sessions</h2>
    <p class="dashboard-card__subtitle">
        Latest workouts logged to your account.
    </p>

    <div class="dashboard-table-wrapper">
        <table class="dashboard-table">
            <thead>
                <tr>
                    <th>Session</th>
                    <th>Date</th>
                    <th>Status</th>
                    <th>Notes</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for session in sessions %}
                <tr>
                    <td>{{ session.name }}</td>
                    <td>{{ session.date }}</td>
                    <td>Logged</td>
                    <td>{{ session.notes|default:"" }}</td>
                    <td><a href="#" class="table-link">Open</a></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">
                        No workouts logged yet. Once sessions are added, they will appear here.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</section>

<section class="dashboard-card dashboard-card--wide">
    <header class="card-header">
        <h2 class="card-title">Session details</h2>
        <p class="card-subtitle">
            Enter the details for a completed workout and submit it to the coach.
        </p>
    </header>

    <div class="card-body">
        <form method="post" class="workout-log-form">
            {% csrf_token %}

            <!-- Summary line: date + session name -->
            <div class="form-grid">
                <div class="form-field">
                    <label for="{{ session_form.date.id_for_label }}">Date</label>
                    {{ session_form.date }}
                </div>

                <div class="form-field">
                    <label for="{{ session_form.name.id_for_label }}">Session name</label>
                    {{ session_form.name }}
                </div>
            </div>

            <!-- Table-style layout for exercises / sets -->
            <div class="workout-table">
                <div class="workout-row workout-row--header">
                    <div class="workout-cell workout-cell--exercise">Exercise</div>
                    <div class="workout-cell workout-cell--target">Target</div>
                    <div class="workout-cell">Set 1</div>
                    <div class="workout-cell">Set 2</div>
                    <div class="workout-cell">Set 3</div>
                </div>

                <!-- Bench Press row -->
                <div class="workout-row">
                    <div class="workout-cell workout-cell--exercise">
                        <strong>Bench Press</strong><br>
                        <span class="text-muted">Main press</span>
                    </div>
                    <div class="workout-cell workout-cell--target">
                        3 × 8
                    </div>
                    <div class="workout-cell">
                        {{ session_form.bench_set1 }}
                    </div>
                    <div class="workout-cell">
                        {{ session_form.bench_set2 }}
                    </div>
                    <div class="workout-cell">
                        {{ session_form.bench_set3 }}
                    </div>
                </div>

                <!-- Seated Row row -->
                <div class="workout-row">
                    <div class="workout-cell workout-cell--exercise">
                        <strong>Seated Row</strong><br>
                        <span class="text-muted">Upper back</span>
                    </div>
                    <div class="workout-cell workout-cell--target">
                        3 × 10
                    </div>
                    <div class="workout-cell">
                        {{ session_form.row_set1 }}
                    </div>
                    <div class="workout-cell">
                        {{ session_form.row_set2 }}
                    </div>
                    <div class="workout-cell">
                        {{ session_form.row_set3 }}
                    </div>
                </div>

                <!-- DB Incline row -->
                <div class="workout-row">
                    <div class="workout-cell workout-cell--exercise">
                        <strong>DB Incline</strong><br>
                        <span class="text-muted">Chest / shoulders</span>
                    </div>
                    <div class="workout-cell workout-cell--target">
                        3 × 12
                    </div>
                    <div class="workout-cell">
                        {{ session_form.incline_set1 }}
                    </div>
                    <div class="workout-cell">
                        {{ session_form.incline_set2 }}
                    </div>
                    <div class="workout-cell">
                        {{ session_form.incline_set3 }}
                    </div>
                </div>
            </div>

            <!-- Notes -->
            <div class="form-field">
                <label for="{{ session_form.notes.id_for_label }}">
                    Session notes <span class="field-optional">(optional)</span>
                </label>
                {{ session_form.notes }}
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">
                    Save + submit
                </button>
                <button type="button" class="btn-secondary" disabled>
                    Save draft
                </button>
            </div>
        </form>
    </div>

    <footer class="card-footer text-muted">
        Set details are stored inside the session notes so that the coaching team can
        review the work completed.
    </footer>
</section>

{% endblock %}
