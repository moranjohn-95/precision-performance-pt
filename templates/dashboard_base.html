{% extends "base.html" %}
{% load static %}

{% block content %}
<style>
/* Hide public navbar on client dashboards */
.site-header {
    display: none;
}
</style>

<div class="dashboard-layout client-dashboard">
    <!-- Mobile/portal top bar sits above the shell -->
    <div class="dashboard-mobilebar">
        <a class="dashboard-mobilebar__brand" href="{% url 'home' %}">
            Precision Performance PT
        </a>
            <div class="dashboard-mobilebar__actions">
                <form method="post" action="{% url 'accounts:logout' %}">
                    {% csrf_token %}
                    <button type="submit" class="dashboard-mobilebar__logout">
                        Logout
                    </button>
                </form>
                <button
                    type="button"
                    class="dashboard-mobilebar__toggle"
                    aria-controls="clientMobileMenu"
                    aria-expanded="false"
                    aria-label="Open client menu"
                    data-dashboard-toggle
                >
                    â˜°
                </button>
            </div>
    </div>

    <div class="dashboard-shell">

        <div class="dashboard-overlay" data-dashboard-overlay hidden></div>

        <!-- Sidebar -->
        <aside class="dashboard-sidebar" id="clientMobileMenu" data-dashboard-sidebar>
            <div class="dashboard-sidebar__header">
                <h2 class="dashboard-sidebar__title">
                    {% block sidebar_title %}Client Menu{% endblock %}
                </h2>
            </div>
            <nav class="dashboard-sidebar__nav">
                <ul>
                    {% block sidebar_menu %}
                    {% include "client/_sidebar.html" %}
                    {% endblock %}
                </ul>
            </nav>
        </aside>

        <!-- Main content -->
        <main class="dashboard-main">
            <header class="dashboard-main__header">
                <div>
                    <p class="dashboard-main__eyebrow">
                        {% block page_eyebrow %}{% endblock %}
                    </p>
                    <h1 class="dashboard-main__title">
                        {% block page_title %}Dashboard{% endblock %}
                    </h1>
                    <div class="dashboard-page-subtitle">
                        <span>
                            Logged in: {{ request.user.get_full_name|default:request.user.username }}
                        </span>
                        {% block page_subtitle %}{% endblock %}
                    </div>
                </div>
                {% block page_header_actions %}{% endblock %}
            </header>

            <section class="dashboard-main__content">
                {% block dashboard_content %}
                <!-- Child templates for cards and tables etc -->
                {% endblock %}
            </section>
        </main>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
    <script src="{% static 'js/dashboard_menu.js' %}"></script>
{% endblock %}
